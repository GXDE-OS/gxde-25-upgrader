
#!/bin/bash
# 检查root权限
if [ "$(id -u)" -ne 0 ]; then
    exit
fi
yes n | env DEBIAN_FRONTEND=noninteractive aptss full-upgrade -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" -yqq --assume-yes 
mv -v /var/lib/dpkg/info/grub-pc.postinst /var/lib/dpkg/info/grub-pc.postinst.bak
dpkg --configure -a
mv -v /var/lib/dpkg/info/grub-pc.postinst.bak /var/lib/dpkg/info/grub-pc.postinst
yes n | env DEBIAN_FRONTEND=noninteractive aptss install gxde-app-upgrader --reinstall -yqq && yes n | env DEBIAN_FRONTEND=noninteractive aptss install gxde-desktop deepin-kwin-x11 libdtkcore-dev gxde-kglobalacceld deepin-desktop-base --reinstall -yqq && echo "-----------------------" && echo "升级完成，请按回车重启您的计算机" && read && reboot || echo "!!!!!!!升级失败，请反馈给QQ群 881201853" 